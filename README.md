# mindbox-task

## Задание

Напишите приложение для работы с геометрическими фигурами, предоставляющее следующий API:

- метод /figure, который принимает POST-запрос с параметрами фигуры (предусмотреть круг и треугольник) и сохраняет ее в персистентное хранилище (по умолчанию SQLite, если хотите использовать другое решение, то необходимо предоставить Docker-контейнер с приложением и выбранной СУБД).
Сервис должен возвращать идентификатор фигуры

- метод /figure/{id}, который по GET-запросу с идентификатором фигуры возвращает ее площадь, если фигура содержится в БД.

Предложите контракты для сервисов, приведите пример корректного вызова (например, тело для POST-запроса)

Ожидаем увидеть в решении:

- Unit-тесты
- готовность сервисов к расширению (насколько сложно добавить поддержку нового типа фигур?)

Приложите ссылку на репозиторий с вашим решением (Github, GitLab). Приложение должно запускаться без дополнительной конфигурации или установки дополнительного ПО.

При сомнениях делайте выбор в пользу самой простой, но соответствующей требованиям реализации. Принятые решения и допущения опишите в readme.md.

## Запуск приложения

Для запуска приложения необходим .NET SDK 5.0.100 или выше.

```shell
dotnet run -p src/GeometricService.WebApi
```

## Контракты

### Сохранение фигуры

`POST http://localhost:5000/figure` - сохраняет фигуру с заданными параметрами в хранилище.

В качестве body необходимо передать JSON следующего вида (пример для треугольника):

```json
{
    "type": 1,
    "parameters": [3, 5, 7]
}
```

где:  

- *type* - тип фигуры (целое число). Для круга он равен 0, для треугольника 1
- *parameters* - параметры фигуры (массив вещественных чисел). Для круга это должно быть одно значение (радиус), для треугольника - 3 значения (стороны)

В случае успеха возвращает id созданной фигуры. Если тип фигуры не поддерживается, либо введены неверные параметры (например, нулевой или отрицательный радиус круга), возвращает BadRequest с описанием ошибки.

### Получение площади фигуры

`GET http://localhost:5000/figure/{id}` - возвращает площадь фигуры с id = `{id}` (подставить нужный id).

Если фигуры с таким id не существует, возвращает NotFound с описанием ошибки.

## Добавление новых фигур

Для добавления нового типа фигур необходимо выполнить следующие действия:

1. В enum `FigureType` добавить новый тип фигуры и придумать для него новое, не повторяющееся число (2 указано в качестве примера):

    ```csharp
    public enum FigureType
    {
        // ...
        NewFigure = 2
    }
    ```

1. Добавить класс новой фигуры, реализовав интерфейс `IFigure` и логику по расчету площади:

    ```csharp
    class NewFigure : IFigure
    {
        public double Area => /* рассчитать площадь фигуры */
    }
    ```

1. Добавить класс фабрики новых фигур, реализовав абстрактный класс `FigureFactory`

    ```csharp
    class NewFigureFactory : FigureFactory
    {
        public override IFigure CreateFigure(double[] parameters)
        {
            // указать, как маппить массив параметров к параметрам новой фигуры
            // создать экземпляр класса новой фигуры
            return new NewFigure(/* ... */);
        }

        public override bool TryParseFigureParameters(double[] parameters, out string errorMessage)
        {
            // вернуть true, если параметры фигуры указаны верно, false - если неверно
        }
    }
    ```

1. В классе `Startup` и методе `ConfigureServices` webapi-проекта зарегистрировать новый тип фигуры:

    ```csharp
    services.AddFigureResolver(builder =>
    {
        // ...
        builder.RegisterFigure(FigureType.NewFigure, new NewFigureFactory());
    });
    ```

После этого можно добавлять фигуры этого типа в БД и рассчитывать для них площадь, менять остальной код не требуется.
